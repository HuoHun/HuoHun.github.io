<!doctype html>

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2.0.5 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Sat, 02 Jul 2016 01:30:05 +0000">

<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<link rel="start" href="../overview-summary.html">

<title>Model (ThinkPHP)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>ThinkPHP</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../think/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../think/package-tree.html">Tree</a></li>
<li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../todo-list.html">Todo</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../think\model.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">think\Model</div>
<a href="../source/library/think/model.php.html#line38" class="location">library\think\Model.php at line 38</a>

<h1>Class Model</h1>

<pre class="tree"><strong>Model</strong><br /></pre>

<dl>
<dt>All Known Subclasses:</dt>
<dd><a href="../think/model/merge.html">think\model\Merge</a> <a href="../think/model/pivot.html">think\model\Pivot</a> </dd>
</dl>

<hr>

<p class="signature">public abstract  class <strong>Model</strong></p>

<div class="comment" id="overview_description"><p>Class Model</p></div>

<dl>
<dt>Method:</dt>
<dd>static PaginatorCollection paginate(integer $listRows = 15, boolean $simple = false, array $config = []) 分页查询</dd>
<dd>static mixed value($field, $default = null) 得到某个字段的值</dd>
<dd>static array column($field, $key = '') 得到某个列的数组</dd>
<dd>static integer count($field = '*') COUNT查询</dd>
<dd>static integer sum($field = '*') SUM查询</dd>
<dd>static integer min($field = '*') MIN查询</dd>
<dd>static integer max($field = '*') MAX查询</dd>
<dd>static integer avg($field = '*') AVG查询</dd>
<dd>static setField($field, $value = '')</dd>
<dd>static Query where($field, $op = null, $condition = null) 指定AND查询条件</dd>
</dl>
<hr>

<table id="summary_constructor">
<tr><th colspan="2">Constructor Summary</th></tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#__construct()">__construct</a>(array|object data)</p><p class="description">架构函数</p></td>
</tr>
</table>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type"> <a href="../think/db/query.html">Query</a></td>
<td class="description"><p class="name"><a href="#db()">db</a>()</p><p class="description">获取当前模型的数据库查询对象</p></td>
</tr>
<tr>
<td class="type">protected  Relation|Query</td>
<td class="description"><p class="name"><a href="#relation()">relation</a>(string|array relation)</p><p class="description">获取关联模型实例</p></td>
</tr>
<tr>
<td class="type">protected  void</td>
<td class="description"><p class="name"><a href="#initialize()">initialize</a>()</p><p class="description">初始化模型</p></td>
</tr>
<tr>
<td class="type">protected static  void</td>
<td class="description"><p class="name"><a href="#init()">init</a>()</p><p class="description">初始化处理</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#data()">data</a>(mixed data, mixed value)</p><p class="description">设置数据对象值（不进行修改器处理）</p></td>
</tr>
<tr>
<td class="type"> mixed</td>
<td class="description"><p class="name"><a href="#getData()">getData</a>(string name)</p><p class="description">获取对象原始数据 如果不存在指定字段返回false</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#setAttr()">setAttr</a>(string name, mixed value, array data)</p><p class="description">修改器 设置数据对象值</p></td>
</tr>
<tr>
<td class="type">protected  mixed</td>
<td class="description"><p class="name"><a href="#writeTransform()">writeTransform</a>(mixed value, string|array type)</p><p class="description">数据写入 类型转换</p></td>
</tr>
<tr>
<td class="type"> mixed</td>
<td class="description"><p class="name"><a href="#getAttr()">getAttr</a>(string name)</p><p class="description">获取器 获取数据对象的值</p></td>
</tr>
<tr>
<td class="type">protected  mixed</td>
<td class="description"><p class="name"><a href="#readTransform()">readTransform</a>(mixed value, string|array type)</p><p class="description">数据读取 类型转换</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#append()">append</a>(array append)</p><p class="description">设置需要追加的输出属性</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#hidden()">hidden</a>(array hidden)</p><p class="description">设置需要隐藏的输出属性</p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#toArray()">toArray</a>()</p><p class="description">转换当前模型对象为数组</p></td>
</tr>
<tr>
<td class="type"> string</td>
<td class="description"><p class="name"><a href="#toJson()">toJson</a>(integer options)</p><p class="description">转换当前模型对象为JSON字符串</p></td>
</tr>
<tr>
<td class="type"> mixed</td>
<td class="description"><p class="name"><a href="#getPk()">getPk</a>(string name)</p><p class="description">获取模型对象的主键</p></td>
</tr>
<tr>
<td class="type">protected  bool</td>
<td class="description"><p class="name"><a href="#isPk()">isPk</a>(string key)</p><p class="description">判断一个字段名是否为主键字段</p></td>
</tr>
<tr>
<td class="type"> integer</td>
<td class="description"><p class="name"><a href="#save()">save</a>(array data, array where, bool getId, bool replace)</p><p class="description">保存当前数据对象</p></td>
</tr>
<tr>
<td class="type"> array|false</td>
<td class="description"><p class="name"><a href="#saveAll()">saveAll</a>(array dataSet, bool replace)</p><p class="description">保存多个数据到当前数据对象</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#allowField()">allowField</a>(bool|array field)</p><p class="description">设置允许写入的字段</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#isUpdate()">isUpdate</a>(bool update, mixed where)</p><p class="description">是否为更新数据</p></td>
</tr>
<tr>
<td class="type">protected  void</td>
<td class="description"><p class="name"><a href="#autoCompleteData()">autoCompleteData</a>(array auto)</p><p class="description">数据自动完成</p></td>
</tr>
<tr>
<td class="type"> integer</td>
<td class="description"><p class="name"><a href="#delete()">delete</a>()</p><p class="description">删除当前的记录</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#auto()">auto</a>(array fields)</p><p class="description">设置自动完成的字段（ 规则通过修改器定义）</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#validate()">validate</a>(array|string|bool rule, array msg)</p><p class="description">设置字段验证</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#validateFailException()">validateFailException</a>(bool fail)</p><p class="description">设置验证失败后是否抛出异常</p></td>
</tr>
<tr>
<td class="type">protected  bool</td>
<td class="description"><p class="name"><a href="#validateData()">validateData</a>(array data)</p><p class="description">自动验证数据</p></td>
</tr>
<tr>
<td class="type"> string</td>
<td class="description"><p class="name"><a href="#getError()">getError</a>()</p><p class="description">返回模型的错误信息</p></td>
</tr>
<tr>
<td class="type">static  void</td>
<td class="description"><p class="name"><a href="#event()">event</a>(string event, callable callback, bool override)</p><p class="description">注册回调方法</p></td>
</tr>
<tr>
<td class="type">protected  bool</td>
<td class="description"><p class="name"><a href="#trigger()">trigger</a>(string event, mixed params)</p><p class="description">触发事件</p></td>
</tr>
<tr>
<td class="type">static  $this</td>
<td class="description"><p class="name"><a href="#create()">create</a>(array data, bool replace)</p><p class="description">写入数据</p></td>
</tr>
<tr>
<td class="type">static  $this</td>
<td class="description"><p class="name"><a href="#update()">update</a>(array data, array where)</p><p class="description">更新数据</p></td>
</tr>
<tr>
<td class="type">static  static</td>
<td class="description"><p class="name"><a href="#get()">get</a>(mixed data, array|string with, bool cache)</p><p class="description">查找单条记录</p></td>
</tr>
<tr>
<td class="type">static  static[]|false</td>
<td class="description"><p class="name"><a href="#all()">all</a>(mixed data, array|string with, bool cache)</p><p class="description">查找所有记录</p></td>
</tr>
<tr>
<td class="type">protected static  <a href="../think/db/query.html">Query</a></td>
<td class="description"><p class="name"><a href="#parseQuery()">parseQuery</a>(mixed data, string with, bool cache)</p><p class="description">分析查询表达式</p></td>
</tr>
<tr>
<td class="type">static  integer</td>
<td class="description"><p class="name"><a href="#destroy()">destroy</a>(mixed data)</p><p class="description">删除记录</p></td>
</tr>
<tr>
<td class="type">static  <a href="../think/model.html">Model</a></td>
<td class="description"><p class="name"><a href="#scope()">scope</a>(string|array|Closure name, mixed ...$params)</p><p class="description">命名范围</p></td>
</tr>
<tr>
<td class="type">static  <a href="../think/model.html">Model</a></td>
<td class="description"><p class="name"><a href="#has()">has</a>(string relation, string operator, integer count, string id)</p><p class="description">根据关联条件查询当前模型</p></td>
</tr>
<tr>
<td class="type">static  <a href="../think/model.html">Model</a></td>
<td class="description"><p class="name"><a href="#hasWhere()">hasWhere</a>(string relation, mixed where)</p><p class="description">根据关联条件查询当前模型</p></td>
</tr>
<tr>
<td class="type">protected static  string</td>
<td class="description"><p class="name"><a href="#parseModel()">parseModel</a>(string model)</p><p class="description">解析模型的完整命名空间</p></td>
</tr>
<tr>
<td class="type"> $this</td>
<td class="description"><p class="name"><a href="#relationQuery()">relationQuery</a>(string|array relations)</p><p class="description">查询当前模型的关联数据</p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#eagerlyResultSet()">eagerlyResultSet</a>(array resultSet, string relation)</p><p class="description">预载入关联查询 返回数据集</p></td>
</tr>
<tr>
<td class="type"> <a href="../think/model.html">Model</a></td>
<td class="description"><p class="name"><a href="#eagerlyResult()">eagerlyResult</a>(<a href="../think/model.html">Model</a> result, string relation)</p><p class="description">预载入关联查询 返回模型对象</p></td>
</tr>
<tr>
<td class="type"> <a href="../think/model/relation.html">Relation</a></td>
<td class="description"><p class="name"><a href="#hasOne()">hasOne</a>(string model, string foreignKey, string localKey, array alias, string joinType)</p><p class="description">HAS ONE 关联定义</p></td>
</tr>
<tr>
<td class="type"> <a href="../think/model/relation.html">Relation</a></td>
<td class="description"><p class="name"><a href="#belongsTo()">belongsTo</a>(string model, string foreignKey, string otherKey, array alias, string joinType)</p><p class="description">BELONGS TO 关联定义</p></td>
</tr>
<tr>
<td class="type"> <a href="../think/model/relation.html">Relation</a></td>
<td class="description"><p class="name"><a href="#hasMany()">hasMany</a>(string model, string foreignKey, string localKey, array alias)</p><p class="description">HAS MANY 关联定义</p></td>
</tr>
<tr>
<td class="type"> <a href="../think/model/relation.html">Relation</a></td>
<td class="description"><p class="name"><a href="#hasManyThrough()">hasManyThrough</a>(string model, string through, string foreignKey, string throughKey, string localKey, array alias)</p><p class="description">HAS MANY 远程关联定义</p></td>
</tr>
<tr>
<td class="type"> <a href="../think/model/relation.html">Relation</a></td>
<td class="description"><p class="name"><a href="#belongsToMany()">belongsToMany</a>(string model, string table, string foreignKey, string localKey, array alias)</p><p class="description">BELONGS TO MANY 关联定义</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#jsonSerialize()">jsonSerialize</a>()</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#offsetSet()">offsetSet</a>(mixed name, mixed value)</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#offsetExists()">offsetExists</a>(mixed name)</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#offsetUnset()">offsetUnset</a>(mixed name)</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#offsetGet()">offsetGet</a>(mixed name)</p></td>
</tr>
</table>

<h2 id="detail_method">Constructor Detail</h2>
<a href="../source/library/think/model.php.html#line111" class="location">library\think\Model.php at line 111</a>

<h3 id="__construct()">__construct</h3>
<code class="signature">public  void <strong>__construct</strong>(array|object data)</code>
<div class="details">
<p>架构函数</p><dl>
<dt>Parameters:</dt>
<dd>data - 数据</dd>
</dl>
</div>

<hr>

<h2 id="detail_method">Method Detail</h2>
<a href="../source/library/think/model.php.html#line141" class="location">library\think\Model.php at line 141</a>

<h3 id="db()">db</h3>
<code class="signature">public  <a href="../think/db/query.html">Query</a> <strong>db</strong>()</code>
<div class="details">
<p>获取当前模型的数据库查询对象</p></div>

<hr>

<a href="../source/library/think/model.php.html#line170" class="location">library\think\Model.php at line 170</a>

<h3 id="relation()">relation</h3>
<code class="signature">protected  Relation|Query <strong>relation</strong>(string|array relation)</code>
<div class="details">
<p>获取关联模型实例</p><dl>
<dt>Parameters:</dt>
<dd>relation - 关联查询</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line189" class="location">library\think\Model.php at line 189</a>

<h3 id="initialize()">initialize</h3>
<code class="signature">protected  void <strong>initialize</strong>()</code>
<div class="details">
<p>初始化模型</p></div>

<hr>

<a href="../source/library/think/model.php.html#line203" class="location">library\think\Model.php at line 203</a>

<h3 id="init()">init</h3>
<code class="signature">protected static  void <strong>init</strong>()</code>
<div class="details">
<p>初始化处理</p></div>

<hr>

<a href="../source/library/think/model.php.html#line213" class="location">library\think\Model.php at line 213</a>

<h3 id="data()">data</h3>
<code class="signature">public  $this <strong>data</strong>(mixed data, mixed value)</code>
<div class="details">
<p>设置数据对象值（不进行修改器处理）</p><dl>
<dt>Parameters:</dt>
<dd>data - 数据或者属性名</dd>
<dd>value - 值</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line231" class="location">library\think\Model.php at line 231</a>

<h3 id="getData()">getData</h3>
<code class="signature">public  mixed <strong>getData</strong>(string name)</code>
<div class="details">
<p>获取对象原始数据 如果不存在指定字段返回false</p><dl>
<dt>Parameters:</dt>
<dd>name - 字段名 留空获取全部</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line250" class="location">library\think\Model.php at line 250</a>

<h3 id="setAttr()">setAttr</h3>
<code class="signature">public  $this <strong>setAttr</strong>(string name, mixed value, array data)</code>
<div class="details">
<p>修改器 设置数据对象值</p><dl>
<dt>Parameters:</dt>
<dd>name - 属性名</dd>
<dd>value - 属性值</dd>
<dd>data - 数据</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line300" class="location">library\think\Model.php at line 300</a>

<h3 id="writeTransform()">writeTransform</h3>
<code class="signature">protected  mixed <strong>writeTransform</strong>(mixed value, string|array type)</code>
<div class="details">
<p>数据写入 类型转换</p><dl>
<dt>Parameters:</dt>
<dd>value - 值</dd>
<dd>type - 要转换的类型</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line354" class="location">library\think\Model.php at line 354</a>

<h3 id="getAttr()">getAttr</h3>
<code class="signature">public  mixed <strong>getAttr</strong>(string name)</code>
<div class="details">
<p>获取器 获取数据对象的值</p><dl>
<dt>Parameters:</dt>
<dd>name - 名称</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line381" class="location">library\think\Model.php at line 381</a>

<h3 id="readTransform()">readTransform</h3>
<code class="signature">protected  mixed <strong>readTransform</strong>(mixed value, string|array type)</code>
<div class="details">
<p>数据读取 类型转换</p><dl>
<dt>Parameters:</dt>
<dd>value - 值</dd>
<dd>type - 要转换的类型</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line432" class="location">library\think\Model.php at line 432</a>

<h3 id="append()">append</h3>
<code class="signature">public  $this <strong>append</strong>(array append)</code>
<div class="details">
<p>设置需要追加的输出属性</p><dl>
<dt>Parameters:</dt>
<dd>append - 属性列表</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line444" class="location">library\think\Model.php at line 444</a>

<h3 id="hidden()">hidden</h3>
<code class="signature">public  $this <strong>hidden</strong>(array hidden)</code>
<div class="details">
<p>设置需要隐藏的输出属性</p><dl>
<dt>Parameters:</dt>
<dd>hidden - 属性列表</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line455" class="location">library\think\Model.php at line 455</a>

<h3 id="toArray()">toArray</h3>
<code class="signature">public  array <strong>toArray</strong>()</code>
<div class="details">
<p>转换当前模型对象为数组</p></div>

<hr>

<a href="../source/library/think/model.php.html#line493" class="location">library\think\Model.php at line 493</a>

<h3 id="toJson()">toJson</h3>
<code class="signature">public  string <strong>toJson</strong>(integer options)</code>
<div class="details">
<p>转换当前模型对象为JSON字符串</p><dl>
<dt>Parameters:</dt>
<dd>options - json参数</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line504" class="location">library\think\Model.php at line 504</a>

<h3 id="getPk()">getPk</h3>
<code class="signature">public  mixed <strong>getPk</strong>(string name)</code>
<div class="details">
<p>获取模型对象的主键</p><dl>
<dt>Parameters:</dt>
<dd>name - 模型名</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line521" class="location">library\think\Model.php at line 521</a>

<h3 id="isPk()">isPk</h3>
<code class="signature">protected  bool <strong>isPk</strong>(string key)</code>
<div class="details">
<p>判断一个字段名是否为主键字段</p><dl>
<dt>Parameters:</dt>
<dd>key - 名称</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line541" class="location">library\think\Model.php at line 541</a>

<h3 id="save()">save</h3>
<code class="signature">public  integer <strong>save</strong>(array data, array where, bool getId, bool replace)</code>
<div class="details">
<p>保存当前数据对象</p><dl>
<dt>Parameters:</dt>
<dd>data - 数据</dd>
<dd>where - 更新条件</dd>
<dd>getId - 新增的时候是否获取id</dd>
<dd>replace - 是否replace</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line659" class="location">library\think\Model.php at line 659</a>

<h3 id="saveAll()">saveAll</h3>
<code class="signature">public  array|false <strong>saveAll</strong>(array dataSet, bool replace)</code>
<div class="details">
<p>保存多个数据到当前数据对象</p><dl>
<dt>Parameters:</dt>
<dd>dataSet - 数据</dd>
<dd>replace - 是否replace</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line682" class="location">library\think\Model.php at line 682</a>

<h3 id="allowField()">allowField</h3>
<code class="signature">public  $this <strong>allowField</strong>(bool|array field)</code>
<div class="details">
<p>设置允许写入的字段</p><dl>
<dt>Parameters:</dt>
<dd>field - 允许写入的字段 如果为true只允许写入数据表字段</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line695" class="location">library\think\Model.php at line 695</a>

<h3 id="isUpdate()">isUpdate</h3>
<code class="signature">public  $this <strong>isUpdate</strong>(bool update, mixed where)</code>
<div class="details">
<p>是否为更新数据</p></div>

<hr>

<a href="../source/library/think/model.php.html#line710" class="location">library\think\Model.php at line 710</a>

<h3 id="autoCompleteData()">autoCompleteData</h3>
<code class="signature">protected  void <strong>autoCompleteData</strong>(array auto)</code>
<div class="details">
<p>数据自动完成</p><dl>
<dt>Parameters:</dt>
<dd>auto - 要自动更新的字段列表</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line728" class="location">library\think\Model.php at line 728</a>

<h3 id="delete()">delete</h3>
<code class="signature">public  integer <strong>delete</strong>()</code>
<div class="details">
<p>删除当前的记录</p></div>

<hr>

<a href="../source/library/think/model.php.html#line746" class="location">library\think\Model.php at line 746</a>

<h3 id="auto()">auto</h3>
<code class="signature">public  $this <strong>auto</strong>(array fields)</code>
<div class="details">
<p>设置自动完成的字段（ 规则通过修改器定义）</p><dl>
<dt>Parameters:</dt>
<dd>fields - 需要自动完成的字段</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line759" class="location">library\think\Model.php at line 759</a>

<h3 id="validate()">validate</h3>
<code class="signature">public  $this <strong>validate</strong>(array|string|bool rule, array msg)</code>
<div class="details">
<p>设置字段验证</p><dl>
<dt>Parameters:</dt>
<dd>rule - 验证规则 true表示自动读取验证器类</dd>
<dd>msg - 提示信息</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line778" class="location">library\think\Model.php at line 778</a>

<h3 id="validateFailException()">validateFailException</h3>
<code class="signature">public  $this <strong>validateFailException</strong>(bool fail)</code>
<div class="details">
<p>设置验证失败后是否抛出异常</p><dl>
<dt>Parameters:</dt>
<dd>fail - 是否抛出异常</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line790" class="location">library\think\Model.php at line 790</a>

<h3 id="validateData()">validateData</h3>
<code class="signature">protected  bool <strong>validateData</strong>(array data)</code>
<div class="details">
<p>自动验证数据</p><dl>
<dt>Parameters:</dt>
<dd>data - 验证数据</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line826" class="location">library\think\Model.php at line 826</a>

<h3 id="getError()">getError</h3>
<code class="signature">public  string <strong>getError</strong>()</code>
<div class="details">
<p>返回模型的错误信息</p></div>

<hr>

<a href="../source/library/think/model.php.html#line839" class="location">library\think\Model.php at line 839</a>

<h3 id="event()">event</h3>
<code class="signature">public static  void <strong>event</strong>(string event, callable callback, bool override)</code>
<div class="details">
<p>注册回调方法</p><dl>
<dt>Parameters:</dt>
<dd>event - 事件名</dd>
<dd>callback - 回调方法</dd>
<dd>override - 是否覆盖</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line855" class="location">library\think\Model.php at line 855</a>

<h3 id="trigger()">trigger</h3>
<code class="signature">protected  bool <strong>trigger</strong>(string event, mixed params)</code>
<div class="details">
<p>触发事件</p><dl>
<dt>Parameters:</dt>
<dd>event - 事件名</dd>
<dd>params - 传入参数（引用）</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line877" class="location">library\think\Model.php at line 877</a>

<h3 id="create()">create</h3>
<code class="signature">public static  $this <strong>create</strong>(array data, bool replace)</code>
<div class="details">
<p>写入数据</p><dl>
<dt>Parameters:</dt>
<dd>data - 数据数组</dd>
<dd>replace - 是否replace</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line891" class="location">library\think\Model.php at line 891</a>

<h3 id="update()">update</h3>
<code class="signature">public static  $this <strong>update</strong>(array data, array where)</code>
<div class="details">
<p>更新数据</p><dl>
<dt>Parameters:</dt>
<dd>data - 数据数组</dd>
<dd>where - 更新条件</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line907" class="location">library\think\Model.php at line 907</a>

<h3 id="get()">get</h3>
<code class="signature">public static  static <strong>get</strong>(mixed data, array|string with, bool cache)</code>
<div class="details">
<p>查找单条记录</p><dl>
<dt>Parameters:</dt>
<dd>data - 主键值或者查询条件（闭包）</dd>
<dd>with - 关联预查询</dd>
<dd>cache - 是否缓存</dd>
<dt>Throws:</dt>
<dd>exception\DbException</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line922" class="location">library\think\Model.php at line 922</a>

<h3 id="all()">all</h3>
<code class="signature">public static  static[]|false <strong>all</strong>(mixed data, array|string with, bool cache)</code>
<div class="details">
<p>查找所有记录</p><dl>
<dt>Parameters:</dt>
<dd>data - 主键列表或者查询条件（闭包）</dd>
<dd>with - 关联预查询</dd>
<dd>cache - 是否缓存</dd>
<dt>Throws:</dt>
<dd>exception\DbException</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line936" class="location">library\think\Model.php at line 936</a>

<h3 id="parseQuery()">parseQuery</h3>
<code class="signature">protected static  <a href="../think/db/query.html">Query</a> <strong>parseQuery</strong>(mixed data, string with, bool cache)</code>
<div class="details">
<p>分析查询表达式</p><dl>
<dt>Parameters:</dt>
<dd>data - 主键列表或者查询条件（闭包）</dd>
<dd>with - 关联预查询</dd>
<dd>cache - 是否缓存</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line958" class="location">library\think\Model.php at line 958</a>

<h3 id="destroy()">destroy</h3>
<code class="signature">public static  integer <strong>destroy</strong>(mixed data)</code>
<div class="details">
<p>删除记录</p><dl>
<dt>Parameters:</dt>
<dd>data - 主键列表 支持闭包查询条件</dd>
<dt>Returns:</dt>
<dd>成功删除的记录数</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line987" class="location">library\think\Model.php at line 987</a>

<h3 id="scope()">scope</h3>
<code class="signature">public static  <a href="../think/model.html">Model</a> <strong>scope</strong>(string|array|Closure name, mixed ...$params)</code>
<div class="details">
<p>命名范围</p><dl>
<dt>Parameters:</dt>
<dd>name - 命名范围名称 逗号分隔</dd>
<dd>...$params - 参数调用</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1020" class="location">library\think\Model.php at line 1020</a>

<h3 id="has()">has</h3>
<code class="signature">public static  <a href="../think/model.html">Model</a> <strong>has</strong>(string relation, string operator, integer count, string id)</code>
<div class="details">
<p>根据关联条件查询当前模型</p><dl>
<dt>Parameters:</dt>
<dd>relation - 关联方法名</dd>
<dd>operator - 比较操作符</dd>
<dd>count - 个数</dd>
<dd>id - 关联表的统计字段</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1043" class="location">library\think\Model.php at line 1043</a>

<h3 id="hasWhere()">hasWhere</h3>
<code class="signature">public static  <a href="../think/model.html">Model</a> <strong>hasWhere</strong>(string relation, mixed where)</code>
<div class="details">
<p>根据关联条件查询当前模型</p><dl>
<dt>Parameters:</dt>
<dd>relation - 关联方法名</dd>
<dd>where - 查询条件（数组或者闭包）</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1073" class="location">library\think\Model.php at line 1073</a>

<h3 id="parseModel()">parseModel</h3>
<code class="signature">protected static  string <strong>parseModel</strong>(string model)</code>
<div class="details">
<p>解析模型的完整命名空间</p><dl>
<dt>Parameters:</dt>
<dd>model - 模型名（或者完整类名）</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1090" class="location">library\think\Model.php at line 1090</a>

<h3 id="relationQuery()">relationQuery</h3>
<code class="signature">public  $this <strong>relationQuery</strong>(string|array relations)</code>
<div class="details">
<p>查询当前模型的关联数据</p><dl>
<dt>Parameters:</dt>
<dd>relations - 关联名</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1109" class="location">library\think\Model.php at line 1109</a>

<h3 id="eagerlyResultSet()">eagerlyResultSet</h3>
<code class="signature">public  array <strong>eagerlyResultSet</strong>(array resultSet, string relation)</code>
<div class="details">
<p>预载入关联查询 返回数据集</p><dl>
<dt>Parameters:</dt>
<dd>resultSet - 数据集</dd>
<dd>relation - 关联名</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1121" class="location">library\think\Model.php at line 1121</a>

<h3 id="eagerlyResult()">eagerlyResult</h3>
<code class="signature">public  <a href="../think/model.html">Model</a> <strong>eagerlyResult</strong>(<a href="../think/model.html">Model</a> result, string relation)</code>
<div class="details">
<p>预载入关联查询 返回模型对象</p><dl>
<dt>Parameters:</dt>
<dd>result - 数据对象</dd>
<dd>relation - 关联名</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1136" class="location">library\think\Model.php at line 1136</a>

<h3 id="hasOne()">hasOne</h3>
<code class="signature">public  <a href="../think/model/relation.html">Relation</a> <strong>hasOne</strong>(string model, string foreignKey, string localKey, array alias, string joinType)</code>
<div class="details">
<p>HAS ONE 关联定义</p><dl>
<dt>Parameters:</dt>
<dd>model - 模型名</dd>
<dd>foreignKey - 关联外键</dd>
<dd>localKey - 关联主键</dd>
<dd>alias - 别名定义</dd>
<dd>joinType - JOIN类型</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1155" class="location">library\think\Model.php at line 1155</a>

<h3 id="belongsTo()">belongsTo</h3>
<code class="signature">public  <a href="../think/model/relation.html">Relation</a> <strong>belongsTo</strong>(string model, string foreignKey, string otherKey, array alias, string joinType)</code>
<div class="details">
<p>BELONGS TO 关联定义</p><dl>
<dt>Parameters:</dt>
<dd>model - 模型名</dd>
<dd>foreignKey - 关联外键</dd>
<dd>otherKey - 关联主键</dd>
<dd>alias - 别名定义</dd>
<dd>joinType - JOIN类型</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1173" class="location">library\think\Model.php at line 1173</a>

<h3 id="hasMany()">hasMany</h3>
<code class="signature">public  <a href="../think/model/relation.html">Relation</a> <strong>hasMany</strong>(string model, string foreignKey, string localKey, array alias)</code>
<div class="details">
<p>HAS MANY 关联定义</p><dl>
<dt>Parameters:</dt>
<dd>model - 模型名</dd>
<dd>foreignKey - 关联外键</dd>
<dd>localKey - 关联主键</dd>
<dd>alias - 别名定义</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1193" class="location">library\think\Model.php at line 1193</a>

<h3 id="hasManyThrough()">hasManyThrough</h3>
<code class="signature">public  <a href="../think/model/relation.html">Relation</a> <strong>hasManyThrough</strong>(string model, string through, string foreignKey, string throughKey, string localKey, array alias)</code>
<div class="details">
<p>HAS MANY 远程关联定义</p><dl>
<dt>Parameters:</dt>
<dd>model - 模型名</dd>
<dd>through - 中间模型名</dd>
<dd>foreignKey - 关联外键</dd>
<dd>throughKey - 关联外键</dd>
<dd>localKey - 关联主键</dd>
<dd>alias - 别名定义</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1215" class="location">library\think\Model.php at line 1215</a>

<h3 id="belongsToMany()">belongsToMany</h3>
<code class="signature">public  <a href="../think/model/relation.html">Relation</a> <strong>belongsToMany</strong>(string model, string table, string foreignKey, string localKey, array alias)</code>
<div class="details">
<p>BELONGS TO MANY 关联定义</p><dl>
<dt>Parameters:</dt>
<dd>model - 模型名</dd>
<dd>table - 中间表名</dd>
<dd>foreignKey - 关联外键</dd>
<dd>localKey - 当前模型关联键</dd>
<dd>alias - 别名定义</dd>
</dl>
</div>

<hr>

<a href="../source/library/think/model.php.html#line1306" class="location">library\think\Model.php at line 1306</a>

<h3 id="jsonSerialize()">jsonSerialize</h3>
<code class="signature">public  void <strong>jsonSerialize</strong>()</code>
<div class="details">
</div>

<hr>

<a href="../source/library/think/model.php.html#line1312" class="location">library\think\Model.php at line 1312</a>

<h3 id="offsetSet()">offsetSet</h3>
<code class="signature">public  void <strong>offsetSet</strong>(mixed name, mixed value)</code>
<div class="details">
</div>

<hr>

<a href="../source/library/think/model.php.html#line1317" class="location">library\think\Model.php at line 1317</a>

<h3 id="offsetExists()">offsetExists</h3>
<code class="signature">public  void <strong>offsetExists</strong>(mixed name)</code>
<div class="details">
</div>

<hr>

<a href="../source/library/think/model.php.html#line1322" class="location">library\think\Model.php at line 1322</a>

<h3 id="offsetUnset()">offsetUnset</h3>
<code class="signature">public  void <strong>offsetUnset</strong>(mixed name)</code>
<div class="details">
</div>

<hr>

<a href="../source/library/think/model.php.html#line1327" class="location">library\think\Model.php at line 1327</a>

<h3 id="offsetGet()">offsetGet</h3>
<code class="signature">public  void <strong>offsetGet</strong>(mixed name)</code>
<div class="details">
</div>

<hr>

<div class="header">
<h1>ThinkPHP</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../think/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../think/package-tree.html">Tree</a></li>
<li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../todo-list.html">Todo</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../think\model.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>